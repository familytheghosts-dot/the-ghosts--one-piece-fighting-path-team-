<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>one piece fighting path</title>

<style>
/* ======= HEADER ======= */
header {
    background: #2b2b2b;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;
    box-shadow: 0 6px 30px rgba(0,0,0,0.6);
    overflow: visible;
}

.header-inner {
    width: 100%;
    max-width: 1200px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    gap: 18px;
}

.left-nav { position: absolute; left: 20px; top: 0px; z-index: 3; }

.left-nav a {
    color: #ff2a2a;
    font-weight: 800;
    font-size: 22px;
    text-decoration: none;
    text-shadow:
        0 0 8px rgba(255,40,40,0.9),
        0 0 14px rgba(255,0,0,0.8),
        0 0 22px rgba(255,0,0,0.6),
        0 0 32px rgba(255,0,0,0.45);
}

/* Ø²Ø± Ø§Ù„ØªØ±Ø¬Ù…Ø© */
.language-switcher {
    position: absolute;
    right: 20px;
    top: 0px;
    z-index: 3;
}

.lang-btn {
    background: rgba(0, 150, 200, 0.2);
    color: #00eaff;
    border: 2px solid #00eaff;
    border-radius: 20px;
    padding: 8px 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 14px;
}

.lang-btn:hover {
    background: rgba(0, 150, 200, 0.4);
    box-shadow: 0 0 15px rgba(0, 200, 255, 0.7);
}

/* small ECG header effect (kept as in your code) */
.ecg { flex: 1; display: flex; align-items: center; justify-content: center; pointer-events: none; }
.ecg svg { width: 100%; max-width: 920px; height: 36px; overflow: visible;
    filter: drop-shadow(0 0 10px rgba(0,255,255,0.25)) drop-shadow(0 0 20px rgba(0,200,255,0.10));
}
.ecg .ecg-path, .ecg .ecg-glow { animation: ecg-move 4.6s linear infinite; }
.ecg .ecg-path { fill: none; stroke: #00f0ff; stroke-width: 2.6; stroke-linecap: round; stroke-dasharray: 1200; stroke-dashoffset: 1200; }
.ecg .ecg-glow { fill: none; stroke: #66ffff; stroke-width: 6; opacity: 0.16; filter: blur(6px); stroke-dasharray: 1200; stroke-dashoffset: 1200; }
@keyframes ecg-move { 0% { stroke-dashoffset: 1200; } 100% { stroke-dashoffset: 0; } }

.title {
    font-weight: 900;
    font-size: 30px;
    letter-spacing: 2px;
    background: linear-gradient(90deg, #ffcc33, #ff6600);
    -webkit-background-clip: text;
    color: transparent;
    text-shadow: 0 0 12px rgba(255,180,50,0.8), 0 0 25px rgba(255,100,0,0.9), 0 0 40px rgba(255,80,0,0.75);
    position: absolute;
    top: 13px;
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
    z-index: 3;
}
.title small { display:block; margin-top:-8px; font-size:16px; font-weight:700;
    background: linear-gradient(90deg, #ffdd66, #ff4400); -webkit-background-clip: text; color: transparent;
    text-shadow: 0 0 10px rgba(255,120,40,0.8); }

/* ===== BODY & GROUPS ===== */
body {
    background: #080808;
    color: #fff;
    font-family: "Segoe UI", Tahoma, Arial, sans-serif;
    text-align: center;
    padding-top: 100px;
    margin:0;
}
h2 { margin-top: 40px; color:#aef7ff; }
.group-title { margin-top: 40px; font-size: 26px; font-weight: bold; color: #59ffc9; }

/* layout */
.level { display: flex; justify-content: center; gap: 300px; margin: 20px 0; }
.level { gap: 90px !important; }          /* you used this: keeps your spacing */
.mid-round { gap: 320px !important; }    /* keeps your mid-round spacing */

/* ===== SLOT ===== */
.slot {
    width: 140px !important;
    height: 240px !important;
    max-width: none !important;
    min-width: 0 !important;
    background: linear-gradient(180deg, #4f4f4f, #1e1e1e);
    border-radius: 16px;
    border: 3px solid rgba(255,255,255,0.12);
    transform: perspective(800px) rotateX(12deg) rotateY(35deg) skewY(-5deg);
    box-shadow: -25px 20px 40px rgba(0,0,0,0.55), inset 0 0 20px rgba(0,0,0,0.5), inset 0 12px 20px rgba(255,255,255,0.04);
    display: flex; align-items: center; justify-content: center;
    color: #eaeaea; font-size: 16px; text-shadow: 0 0 6px rgba(0,0,0,0.7);
    cursor: pointer; transition: transform .25s ease, box-shadow .25s ease, background .25s ease;
    position: relative;
    /* Ø¥ØµÙ„Ø§Ø­: Ø¥Ø²Ø§Ù„Ø© overflow: hidden Ù…Ù† Ø§Ù„Ø³Ù„ÙˆØ· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ */
    overflow: visible !important;
}
.slot:hover { transform: perspective(900px) rotateX(12deg) rotateY(22deg) skewY(-4deg) translateY(-6px);
    box-shadow: -30px 26px 48px rgba(0,0,0,0.6), inset 0 0 22px rgba(255,255,255,0.03); }
.slot.active { background: linear-gradient(180deg,#ffd452,#d14400); border-color: rgba(255,180,0,0.7);
    box-shadow: -25px 20px 40px rgba(0,0,0,0.55), inset 0 0 25px rgba(255,140,0,0.4), inset 0 12px 30px rgba(255,170,0,0.25), 0 0 25px rgba(255,140,0,0.6);
    color:#3b1f00; transform: perspective(900px) rotateX(12deg) rotateY(22deg) skewY(-4deg) translateY(-8px) scale(1.02); }

/* side image - Ø¥ØµÙ„Ø§Ø­ Ù†Ù‡Ø§Ø¦ÙŠ */
.side-img {
    position: absolute;
    right: -123px !important;
    top: 50%;
    transform: translateY(-50%) !important;
    width: 115px !important;
    height: auto;
    pointer-events: none;
    z-index: -10; /* Ø£Ø¹Ù„Ù‰ Ù…Ù† ÙƒÙ„ Ø´ÙŠØ¡ */
}

/* vertical label */
.slot .label {
    display: inline-block;
    transform: rotate(90deg);
    transform-origin: center;
    pointer-events: none;
    user-select: none;
    z-index: 15;
    position: relative;
}

/* ===== Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø¯ÙˆØ§Ù…Ø§Øª Ø§Ù„Ù…Ù†ÙØµÙ„Ø© ===== */
.vortex-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden; /* Ø§Ù„Ø¯ÙˆØ§Ù…Ø§Øª ÙÙ‚Ø· Ù‡ÙŠ Ø§Ù„ØªÙŠ Ø³ØªÙÙ‚Øµ */
    border-radius: 16px;
    z-index: 1;
    pointer-events: none;
}

/* ===== neon container you asked for (kept separate) ===== */

/* Ø§Ù„ØºÙ„Ø§Ù Ø§Ù„Ø°ÙŠ ÙŠØ­ØªÙˆÙŠ Ø§Ù„Ø³Ù„ÙˆØ·Ø§Øª + Ø§Ù„Ù…Ø±Ø¨Ø¹ */
.neon-wrapper {
    position: relative;
    display: inline-block;   /* ÙŠØ¶Ø¨Ø· Ø­Ø¬Ù…Ù‡ Ø­Ø³Ø¨ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³Ù„ÙˆØ·Ø§Øª */
    padding: 25px 210px;      /* Ù…Ù† Ù‡Ù†Ø§ ØªØªØ­ÙƒÙ… ÙÙŠ Ø­Ø¬Ù… Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø­ÙˆÙ„ Ø§Ù„Ø³Ù„ÙˆØ·Ø§Øª */
}

/* Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù†ÙŠÙˆÙ† */
.neon-box {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;

    border-radius: 22px;
    border: 2px solid #00eaff;

    /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ù†ÙŠÙˆÙ† */
    box-shadow:
        0 0 14px #00eaff,
        0 0 30px rgba(0, 200, 255, 0.9),
        0 0 80px rgba(0, 150, 255, 0.7),
        inset 0 0 18px rgba(0, 230, 255, 0.4);

    background: rgba(0, 150, 200, 0.05); /* Ø¶Ø¨Ø§Ø¨ Ø£Ø²Ø±Ù‚ Ø®ÙÙŠÙ */
    backdrop-filter: blur(7px);          /* ØªØ¹ØªÙŠÙ… Ø²Ø¬Ø§Ø¬ÙŠ Ø¬Ù…ÙŠÙ„ */

    pointer-events: none;  /* Ù„Ø§ ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù„ÙˆØ·Ø§Øª */
    z-index: 0;
}

/* Ø±ÙØ¹ Ø§Ù„Ø³Ù„ÙˆØ·Ø§Øª ÙÙˆÙ‚ Ø§Ù„Ù…Ø±Ø¨Ø¹ */
.neon-wrapper .level {
    position: relative;
    z-index: 10;
}
    /* ====== Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø­Ù…Ø±Ø§Ø¡ Ù…Ù† Ø§Ù„Ù†ÙŠÙˆÙ† ====== */

/* Ø§Ù„ØºÙ„Ø§Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
.neon-wrapper-red {
    position: relative;
    display: inline-block;
    padding: 25px 210px; /* ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ø¨Ø­Ø±ÙŠØ© */
}

/* Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù†ÙŠÙˆÙ† Ø§Ù„Ø£Ø­Ù…Ø± */
.neon-box-red {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;

    border-radius: 22px;
    border: 2px solid #ff0044;

    /* ØªØ£Ø«ÙŠØ± Ù†ÙŠÙˆÙ† Ø£Ø­Ù…Ø± Ù‚ÙˆÙŠ */
    box-shadow:
        0 0 14px #ff0044,
        0 0 30px rgba(255, 0, 80, 0.9),
        0 0 80px rgba(255, 0, 60, 0.7),
        inset 0 0 18px rgba(255, 40, 80, 0.4);

    background: rgba(255, 0, 60, 0.04);  /* Ø¶Ø¨Ø§Ø¨ Ø£Ø­Ù…Ø± Ø®ÙÙŠÙ */
    backdrop-filter: blur(7px);

    pointer-events: none;
    z-index: 0;
}

/* Ø§Ù„Ø³Ù„ÙˆØ·Ø§Øª ÙÙˆÙ‚ Ø§Ù„Ù†ÙŠÙˆÙ† */
.neon-wrapper-red .level {
    position: relative;
    z-index: 10;
}

    html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
    overflow-x: hidden; /* ÙÙ‚Ø· Ù…Ù†Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø£ÙÙ‚ÙŠ */
}

/* Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙØ­Ø© Ø¨ØªØ¯Ø±Ù‘Ø¬ Ø£Ø¨ÙŠØ¶ Ù„Ø£Ø³ÙˆØ¯ */
body {
    background: linear-gradient(to right, #ffffff 0%, #d0d0d0 40%, #101010 80%, #000000 100%);
}

/* Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³ ÙÙˆÙ‚ Ø§Ù„Ø®Ù„ÙÙŠØ© Ù„ÙƒÙ† Ø®Ù„Ù Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
#starfield {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
}

   .image-wrapper {
    position: relative;
    display: inline-block; /* Ø¨Ø§Ø´ ÙŠØ§Ø®Ø° Ø­Ø¬Ù… Ø§Ù„Ø³Ù„ÙˆØ·Ø§Øª */
}

/* Ø§Ù„ØµÙˆØ±Ø© ØªØ­Øª ÙƒØ§Ù…Ù„ */
.floating-image-box {
    position: absolute;
    top: 0;
    left: -560;

    width: 100%;
    height: 100%;

    z-index: 0; /* Ø§Ù„ØµÙˆØ±Ø© ØªØ­Øª */
    pointer-events: none;
}

/* ØµÙˆØ±Ø© Ø§Ù„Ø£Ø±Ø¶ */
.floating-image {
    position: absolute;
    left: -870px;      /* â† Ø¬Ø±ØªÙ‡Ø§ Ù„Ù„ÙŠØ³Ø§Ø± 560px */
    top: 50%;
    transform: translateY(-50%) rotate(-0deg);

    width: 1040px;
    height: 1090px;

    pointer-events: none;
    z-index: 0;       /* â† Ø¨Ø§Ø´ ØªÙƒÙˆÙ† ØªØ­Øª Ø§Ù„Ø³Ù„ÙˆØ·Ø§Øª */
}

/* Ø§Ù„Ø³Ù„ÙˆØ·Ø§Øª ÙÙˆÙ‚ */
.image-wrapper .slot {
    position: relative;
    z-index: 10;
}

    /* Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Doctor */
.doctor-floating-box {
    position: absolute;
    top: 0;
    left: 0;

    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0; /* ØªØ¨Ù‚Ù‰ ØªØ­Øª Ø§Ù„Ø³Ù„ÙˆØ·Ø§Øª */
}

.doctor-floating-img {
    position: absolute;

    /* ØºØ§Ø¯ÙŠ Ù†Ø®Ù„Ù‘ÙŠÙ‡Ù… Ù‚ÙŠÙ… Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ÙˆØºØ§Ø¯ÙŠ Ù†Ù‚ÙˆÙ„Ùƒ Ù†Ø¶Ø¨Ø·Ù‡Ù… */
    left: -100px;
    top: 50%;
    transform: translateY(-50%) rotate(100deg);

    width: 800px;      /* Ø§Ù„Ø­Ø¬Ù… ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ±Ù‡ */
    height: 800px;

    pointer-events: none;
    z-index: 0;        /* ØªØ­Øª Ø§Ù„Ø³Ù„ÙˆØ·Ø§Øª */
}
    .story-card-box {
    position: absolute;
    left: -420px;     /* ØºÙŠÙ‘Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù„ÙŠ Ø¨ØºÙŠØªÙŠ */
    top: 380px;      /* ØºÙŠÙ‘Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù„ÙŠ Ø¨ØºÙŠØªÙŠ */
    transform: rotate(90deg);
    z-index: 5000;
}

.story-card {
    width: 210px;
    height: 60px;

    border-radius: 15px;
    padding: 20px;

    background: rgba(0,0,0,0.7);
    box-shadow: 0 0 25px #0ff;
    border: 2px solid #0ff;

    cursor: pointer;
    text-align: center;
    transition: 0.2s;
}

.story-card:hover {
    transform: scale(1.03);
    box-shadow: 0 0 35px #0ff;
}

.story-card-title {
    font-size: 22px;
    color: #0ff;
    text-shadow: 0 0 15px #0ff;
}

.story-card-sub {
    color: #ccc;
    font-size: 15px;
    margin-top: 5px;
}

    .modal-overlay {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    backdrop-filter: blur(6px);
    background: rgba(0,0,0,0.6);
    z-index: 9998;
}

.modal-content {
    position: absolute;
    width: 500px;
    height: 900px;
    background: #111;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 0 25px #0ff;
    overflow-y: auto;

    /* â† Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù‡Ù†Ø§ */
    top: 600px;              /* ØºÙŠÙ‘Ø±Ù‡Ø§ ÙƒÙ…Ø§ ØªØ±ÙŠØ¯ */
    left: 50%;
    transform: translateX(-50%);
}

.close-modal {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 28px;
    cursor: pointer;
    color: #0ff;
}
.modal-text {
    color: white;
    line-height: 1.7;
    margin-top: 40px;
}

    /* ===== SLOT WITH BLUE SPIRAL ENERGY ===== */
.slot.spiral {
    position: relative;
    border: 2px solid #00aaff;
    border-radius: 14px;
    background: #000;
    box-shadow:
        0 0 10px #00aaff,
        inset 0 0 10px #00aaff;
}

/* Ø§Ù„Ø¯ÙˆØ§Ù…Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© */
.slot.spiral .vortex-container::before {
    content: "";
    position: absolute;
    width: 180%;
    height: 180%;
    top: -40%;
    left: -40%;
    background: conic-gradient(
        from 0deg,
        rgba(0,170,255,0) 0%,
        rgba(0,170,255,0.35) 20%,
        rgba(0,110,255,0.45) 40%,
        rgba(0,170,255,0.35) 60%,
        rgba(0,170,255,0) 80%
    );
    filter: blur(12px);
    animation: spinVortex 4s linear infinite;
    pointer-events: none;
}

/* ÙˆÙ‡Ø¬ Ø¯Ø§Ø®Ù„ÙŠ */
.slot.spiral .vortex-container::after {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(
        circle,
        rgba(0,170,255,0.15) 0%,
        rgba(0,170,255,0.05) 40%,
        rgba(0,170,255,0) 80%
    );
    pointer-events: none;
}

/* Ø­Ø±ÙƒØ© Ø§Ù„Ø¯ÙˆØ±Ø§Ù† */
@keyframes spinVortex {
    from { transform: rotate(0deg); }
    to   { transform: rotate(2999999deg); }
}


    /* ===== SLOT WITH RED SPaRAL ENERGY ===== */
.slot.sparal {
    position: relative;
    border: 2px solid #ff0030;
    border-radius: 14px;
    background: #000;
    box-shadow:
        0 0 10px #ff0030,
        inset 0 0 10px #ff0030;
}

/* Ø§Ù„Ø¯ÙˆØ§Ù…Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© */
.slot.sparal .vortex-container::before {
    content: "";
    position: absolute;
    width: 180%;
    height: 180%;
    top: -40%;
    left: -40%;
    background: conic-gradient(
        from 0deg,
        rgba(255,0,50,0) 0%,
        rgba(255,0,50,0.35) 20%,
        rgba(255,60,0,0.45) 40%,
        rgba(255,0,50,0.35) 60%,
        rgba(255,0,50,0) 80%
    );
    filter: blur(12px);
    animation: spinVortex 4s linear infinite;
    pointer-events: none;
}

/* ÙˆÙ‡Ø¬ Ø¯Ø§Ø®Ù„ÙŠ */
.slot.sparal .vortex-container::after {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(
        circle,
        rgba(255,0,50,0.18) 0%,
        rgba(255,0,50,0.08) 40%,
        rgba(255,0,50,0) 80%
    );
    pointer-events: none;
}

/* Ø­Ø±ÙƒØ© Ø§Ù„Ø¯ÙˆØ±Ø§Ù† */
@keyframes spinVortex {
    from { transform: rotate(0deg); }
    to   { transform: rotate(2999999deg); }
}


    /* ====== CHAMPION SLOT - Ø¥ØµÙ„Ø§Ø­ Ù„ÙŠØµØ¨Ø­ Ù…Ø«Ù„ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† ====== */
#Champion .slot {
  position: relative;
  width: 100%;
  height: 100%;
  border-radius: 16px;
  background: linear-gradient(180deg, #260026 0%, #120012 100%);
  border: 3px solid rgba(190,0,255,0.95);
  box-shadow:
    0 0 22px rgba(190,0,255,0.6),
    inset 0 0 28px rgba(200,0,255,0.15);
  animation: purplePulse 1.2s ease-in-out infinite;
  cursor: pointer;
  transform: perspective(800px) rotateX(12deg) rotateY(35deg) skewY(-5deg);
  transition: transform .25s ease, box-shadow .25s ease, background .25s ease;
}

#Champion .slot:hover {
    transform: perspective(900px) rotateX(12deg) rotateY(22deg) skewY(-4deg) translateY(-6px);
    box-shadow: -30px 26px 48px rgba(0,0,0,0.6), inset 0 0 22px rgba(255,255,255,0.03);
}

#Champion .slot.active {
    background: linear-gradient(180deg,#ffd452,#d14400);
    border-color: rgba(255,180,0,0.7);
    box-shadow: -25px 20px 40px rgba(0,0,0,0.55), inset 0 0 25px rgba(255,140,0,0.4), inset 0 12px 30px rgba(255,170,0,0.25), 0 0 25px rgba(255,140,0,0.6);
    color:#3b1f00;
    transform: perspective(900px) rotateX(12deg) rotateY(22deg) skewY(-4deg) translateY(-8px) scale(1.02);
}

/* Ù†Ø¨Ø¶ Ø§Ù„Ø¥Ø·Ø§Ø± */
@keyframes purplePulse {
  0%   { box-shadow: 0 0 22px rgba(190,0,255,0.55), inset 0 0 28px rgba(200,0,255,0.14); }
  50%  { box-shadow: 0 0 32px rgba(190,0,255,0.85), inset 0 0 36px rgba(200,0,255,0.22); }
  100% { box-shadow: 0 0 22px rgba(190,0,255,0.55), inset 0 0 28px rgba(200,0,255,0.14); }
}

/* ====== INNER VORTEX (Confined Green Spiral) ====== */
#Champion .slot .vortex-container::before {
  position: absolute;
  width: 180%;
  height: 180%;
  top: -40%;
  left: -40%;
  border-radius: 50%;
  pointer-events: none;
  z-index: 1;

  background: conic-gradient(
    from 0deg,
    rgba(0,0,0,0) 0%,
    rgba(0,40,0,0.25) 12%,
    rgba(0,80,0,0.45) 28%,
    rgba(0,140,0,0.55) 48%,
    rgba(0,200,0,0.70) 65%,
    rgba(120,255,140,0.82) 82%,
    rgba(0,0,0,0) 100%
  );

  filter: blur(14px);
  animation: vortexSpin 3.3s linear infinite;
  content: "";
}

/* Ø­Ø±ÙƒØ© Ø§Ù„Ø¯ÙˆØ±Ø§Ù† Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø³Ø±Ø¹Ø© */
@keyframes vortexSpin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(299999deg); }
}

/* ====== Inner glow ====== */
#Champion .slot .vortex-container::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 16px;
  z-index: 2;
  pointer-events: none;

  background: radial-gradient(
    circle,
    rgba(0,255,140,0.18) 0%,
    rgba(0,140,80,0.08) 40%,
    rgba(0,0,0,0) 80%
  );
}

/* ====== SIDE IMAGE â€” ALWAYS ON TOP ====== */
#Champion .slot .side-img {
  position: absolute;
  right: -130px;
  top: 50%;
  transform: translateY(-50%) !important;
  z-index: 30;  /* ÙÙˆÙ‚ ÙƒÙ„ Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª */
  pointer-events: none;
}

    /* ====== FOOTER BOX ====== */
.footer-box {
    width: 80%;
    max-width: 500px;
    margin: 50px auto;
    padding: 25px;
    background: rgba(30, 30, 30, 0.9);
    border: 2px solid #00eaff;
    border-radius: 15px;
    box-shadow: 0 0 20px rgba(0, 200, 255, 0.3);
    text-align: center;
}

.footer-title {
    color: #00eaff;
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 20px;
    text-shadow: 0 0 10px rgba(0, 200, 255, 0.5);
}

.footer-links {
    display: flex;
    justify-content: center;
    gap: 25px;
    flex-wrap: wrap;
}

.footer-link {
    color: #00eaff;
    text-decoration: none;
    font-weight: 500;
    font-size: 14px;
    padding: 8px 16px;
    border: 1.5px solid #00eaff;
    border-radius: 20px;
    transition: all 0.3s ease;
}

.footer-link:hover {
    background: rgba(0, 150, 200, 0.2);
    box-shadow: 0 0 12px rgba(0, 200, 255, 0.6);
    transform: translateY(-2px);
}

</style>
</head>

<body>

<header>
    <div class="header-inner">
        <div class="left-nav"><a href="index.html" data-ar="home" data-zh="ä¸»é¡µ">home</a></div>
        <div class="ecg" aria-hidden="true">
            <svg viewBox="0 0 1000 40" preserveAspectRatio="none">
                <path class="ecg-glow" d="M0,20 L80,20 L100,20 L120,20 L150,20 L170,20 L190,20 L210,20 L230,20 L250,20 L300,20 L330,8 L350,30 L380,20 L420,20 L470,20 L500,20 L540,20 L560,20 L590,20 L620,20 L640,20 L660,20 L720,20 L750,20 L780,7 L800,33 L820,20 L920,20 L1000,20" />
                <path class="ecg-path" d="M0,20 L70,20 L90,20 L110,20 L140,20 L165,20 L185,20 L205,20 L225,20 L245,20 L295,20 L325,6 L345,34 L375,20 L415,20 L455,20 L495,20 L535,20 L555,20 L585,20 L615,20 L635,20 L655,20 L715,20 L745,20 L775,6 L795,34 L815,20 L915,20 L1000,20" />
            </svg>
        </div>
        <div class="title"><small data-ar="ÙˆÙ† Ø¨ÙŠØ³ ÙØ§ÙŠØªÙ†Øº Ø¨Ø§Øª" data-zh="èˆªæµ·ç‹çƒ­è¡€èˆªçº¿">one piece fighting path</small></div>
        <div class="language-switcher">
            <button class="lang-btn" onclick="switchLanguage('ar')">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
            <button class="lang-btn" onclick="switchLanguage('zh')">ä¸­æ–‡</button>
        </div>
    </div>
</header>

<!-- Ø§Ù„Ø¢Ù† Ø§Ù„Ø´Ø¬Ø±Ø© Ù…Ø¹ Ø§Ù„ØµÙˆØ± Ø§Ù„ØµØ­ÙŠØ­Ø© -->

<canvas id="starfield"></canvas>
<div class="stars"></div>
<div class="stars2"></div>
<div class="stars3"></div>
<!-- Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© A -->
<div class="group-title" data-ar="Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© A" data-zh="Aç»„">...</div>

<div class="level" id="A_round4">
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'A_round2', 0)">
        <span class="label">ÙŠØ§Ø³Ø±</span>
        <img src="images/botola1.webp" class="side-img">
        <!-- Ø¥Ø¶Ø§ÙØ© Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø¯ÙˆØ§Ù…Ø§Øª -->
        <div class="vortex-container"></div>
    </div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'A_round2', 0)">
        <span class="label">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù„Ù†ÙŠ</span>
        <img src="images/botola3.webp" class="side-img">
        <div class="vortex-container"></div>
    </div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'A_round2', 1)">
        <span class="label">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù„Øª</span>
        <img src="images/botola2.webp" class="side-img">
        <div class="vortex-container"></div>
    </div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'A_round2', 1)">
        <span class="label">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø±Ø§Ø¨Ø¹</span>
        <img src="images/botola4.webp" class="side-img">
        <div class="vortex-container"></div>
    </div>
</div>

<div class="level mid-round" id="A_round2">
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'A_final', 0)"><span class="label"></span><img src="" class="side-img"><div class="vortex-container"></div></div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'A_final', 0)"><span class="label"></span><img src="" class="side-img"><div class="vortex-container"></div></div>
</div>

<div class="neon-wrapper">

    <div class="neon-box"></div>

    <div class="level" id="A_final">
        <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'A_B_Winner', 0)">
            <span class="label"></span><img src="" class="side-img">
            <div class="vortex-container"></div>
        </div>
    </div>

    <div class="level" id="A_B_Winner">
    <div class="slot spiral" onclick="if(requirePassword()) secureSelect(this, 'A_B_Winner2', 0)">
        <span class="label"></span><img src="" class="side-img">
        <div class="vortex-container"></div>
    </div>
</div>
    <div class="level" id="B_final">
        <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'A_B_Winner', 0)">
            <span class="label"></span><img src="" class="side-img">
            <div class="vortex-container"></div>
        </div>
    </div>

</div>

<div class="level mid-round" id="B_round2">
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'B_final', 0)"><span class="label"></span><img src="" class="side-img"><div class="vortex-container"></div></div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'B_final', 0)"><span class="label"></span><img src="" class="side-img"><div class="vortex-container"></div></div>
</div>

<div class="level" id="B_round4">
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'B_round2', 0)"><span class="label">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø®Ø§Ù…Ø³</span><img src="images/botola5.webp" class="side-img"><div class="vortex-container"></div></div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'B_round2', 0)"><span class="label">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø³Ø§Ø¯Ø³</span><img src="images/botola7.webp" class="side-img"><div class="vortex-container"></div></div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'B_round2', 1)"><span class="label">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø³Ø§Ø¨Ø¹</span><img src="images/botola6.webp" class="side-img"><div class="vortex-container"></div></div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'B_round2', 1)"><span class="label">Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù…Ù†</span><img src="images/botola8.webp" class="side-img"><div class="vortex-container"></div></div>
</div>

<div class="group-title" data-ar="Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© B" data-zh="Bç»„">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© B</div>

<!-- Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø§Ù„ÙƒØ¨ÙŠØ± -->
<div class="image-wrapper">

    <!-- Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (Ø§Ù„Ø£Ø±Ø¶) -->
    <div class="floating-image-box">
        <img src="images/earth.png" class="floating-image">
    </div>

    <!-- Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Ø§Ù„Ø¯ÙƒØªÙˆØ±) -->
    <div class="doctor-floating-box">
        <img src="images/3doctor.png" class="doctor-floating-img">
    </div>

    <!-- Ø²Ø± Ø§Ù„Ù‚ØµØ© (Story Card) -->
    <div class="story-card-box">
        <div class="story-card" onclick="openStory()">
            <div class="story-card-title" data-ar="Ù„Ù‚Ø¯ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø¥Ù„ÙŠÙƒ..." data-zh="æ‚¨æ”¶åˆ°äº†ä¸€æ¡æ–°æ¶ˆæ¯...">A new message has been sent to you...</div>
            <div class="story-card-sub"></div>
        </div>
    </div>

    <div class="level" id="A_B_Winner2">
        <div class="slot spiral" onclick="if(requirePassword()) secureSelect(this, 'Champion', 0)">
            <span class="label"></span><img src="" class="side-img">
            <div class="vortex-container"></div>
        </div>
    </div>

    <div id="Champion">
    <div class="slot" onclick="if(requirePassword()) championSelected(this)">
        <span class="label"></span>
        <img src="" class="side-img">
        <div class="vortex-container"></div>
    </div>
</div>

    <div class="level" id="C_D_Winner2">
        <div class="slot sparal" onclick="if(requirePassword()) secureSelect(this, 'Champion', 0)">
            <span class="label"></span><img src="" class="side-img">
            <div class="vortex-container"></div>
        </div>
    </div>

</div>


<div id="storyModal" class="modal-overlay">
    <div class="modal-content">
        <div class="close-modal" onclick="closeStory()">âœ•</div>

        <div class="modal-text">
            <!-- Ù‡Ù†Ø§ ØºØ§Ø¯ÙŠ Ù†Ø­Ø· Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© -->
            <div id="storyText">
                <p data-ar="Ø£Ù†Ø§ ÙÙŠØ¬Ø§Ø¨ÙˆÙ†Ùƒ." data-zh="æˆ‘æ˜¯è´åŠ åºå…‹ã€‚">I am Vegapunk.</p>

                <p data-ar="ÙÙŠ Ø¹Ø§Ù… 2100ØŒ ØªÙ‚Ø¯Ù… Ø§Ù„Ø¹Ù„Ù… ÙÙŠ Ø¹Ø§Ù„Ù…ÙƒÙ… Ù„Ø¯Ø±Ø¬Ø© Ø£Ù† Ø¹Ø§Ù„Ù… ÙˆÙ† Ø¨ÙŠØ³ ØªØ­ÙˆÙ„ Ù…Ù† Ø§Ù„Ø®ÙŠØ§Ù„ Ø¥Ù„Ù‰ Ø§Ù„ÙˆØ§Ù‚Ø¹.<br>ÙŠÙ…ÙƒÙ† Ù„Ù„Ù†Ø§Ø³ Ù…Ù† Ø¹Ø§Ù„Ù…ÙƒÙ… Ø§Ù„Ø¢Ù† Ø¯Ø®ÙˆÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙˆØ§Ù„Ø¹ÙŠØ´ Ø¯Ø§Ø®Ù„ Ù‚ØµØªÙ‡." data-zh="åœ¨2100å¹´ï¼Œä½ ä»¬ä¸–ç•Œçš„ç§‘å­¦å‘å±•åˆ°äº†å¦‚æ­¤ç¨‹åº¦ï¼Œä»¥è‡³äºæµ·è´¼ç‹çš„ä¸–ç•Œä»è™šæ„å˜æˆäº†ç°å®ã€‚<br>ä½ ä»¬ä¸–ç•Œçš„äººä»¬ç°åœ¨å¯ä»¥è¿›å…¥è¿™ä¸ªæ–°ä¸–ç•Œå¹¶ç”Ÿæ´»åœ¨å®ƒçš„æ•…äº‹ä¸­ã€‚">In the year 2100, science in your world advanced so far that the world of One Piece turned from fiction into reality.<br>People from your world can now enter this new world and live inside its story.</p>

                <p data-ar="Ù„ÙƒÙ† Ø´ÙŠØ¡ Ù…Ø§ Ø­Ø¯Ø« Ø¨Ø´ÙƒÙ„ ÙØ¸ÙŠØ¹." data-zh="ä½†æœ‰äº›äº‹æƒ…å‡ºäº†å¯æ€•çš„é”™è¯¯ã€‚">But something went terribly wrong.</p>

                <p data-ar="Ø¯Ø®Ù„Øª Ù…Ø¬Ù…ÙˆØ¹Ø© Ø®Ø·ÙŠØ±Ø© Ù…Ù† Ù…Ø¤ÙŠØ¯ÙŠ Ø§Ù„Ø­ÙƒÙˆÙ…Ø© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø¹Ø§Ù„Ù… ÙˆÙ† Ø¨ÙŠØ³ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ.<br>ØºÙŠØ±ÙˆØ§ Ù…Ø³Ø§Ø± Ø§Ù„Ù‚ØµØ©ØŒ ÙˆØ³ÙŠØ·Ø±ÙˆØ§ Ø¹Ù„Ù‰ Ø¹Ø¯Ø© Ù…Ù†Ø§Ø·Ù‚ØŒ ÙˆØ£Ø³Ø±ÙˆØ§ Ù„ÙˆÙÙŠ Ù‚Ø¨Ø¹Ø© Ø§Ù„Ù‚Ø´.<br>ÙƒÙ…Ø§ Ø£ØºÙ„Ù‚ÙˆØ§ ÙƒÙ„ Ø·Ø±ÙŠÙ‚ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø§Ù„Ù…." data-zh="ä¸€ç¾¤å±é™©çš„ä¸–ç•Œæ”¿åºœæ”¯æŒè€…è¿›å…¥äº†çœŸå®çš„æµ·è´¼ç‹ä¸–ç•Œã€‚<br>ä»–ä»¬æ”¹å˜äº†æ•…äº‹çš„æµå‘ï¼Œæ§åˆ¶äº†å‡ ä¸ªåœ°åŒºï¼Œå¹¶ä¿˜è™äº†è‰å¸½è·¯é£ã€‚<br>ä»–ä»¬è¿˜å°é”äº†è¿™ä¸ªä¸–ç•Œçš„æ¯ä¸€æ¡é“è·¯ã€‚">A dangerous group of World Government supporters entered the real One Piece world.<br>They changed the flow of the story, took control of several regions, and captured Straw Hat Luffy.<br>They also blocked every path in this world.</p>

                <p data-ar="Ù‡Ø¯ÙÙ‡Ù… Ø¨Ø³ÙŠØ·: Ø§Ù„Ø³ÙŠØ·Ø±Ø© Ø¹Ù„Ù‰ Ø¹Ø§Ù„Ù… ÙˆÙ† Ø¨ÙŠØ³ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù…Ù† Ø®Ù„Ø§Ù„ Ø¥Ø¹Ø¯Ø§Ù… Ù„ÙˆÙÙŠ." data-zh="ä»–ä»¬çš„ç›®æ ‡å¾ˆç®€å•ï¼šé€šè¿‡å¤„å†³è·¯é£æ¥æ§åˆ¶çœŸå®çš„æµ·è´¼ç‹ä¸–ç•Œã€‚">Their goal is simple: to take control of the real One Piece world by executing Luffy.</p>

                <p data-ar="ÙˆØ§Ù„Ø£Ø³ÙˆØ£ ÙÙŠ Ø§Ù„Ø£Ù…Ø± Ù‡Ùˆ Ù‡Ø°Ø§:<br>Ø£ÙŠ Ø´Ø®Øµ ÙŠÙ…ÙˆØª Ø¯Ø§Ø®Ù„ Ø¹Ø§Ù„Ù… ÙˆÙ† Ø¨ÙŠØ³ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ù‡ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø£Ø¨Ø¯Ø§Ù‹." data-zh="æœ€ç³Ÿç³•çš„æ˜¯ï¼š<br>ä»»ä½•åœ¨æµ·è´¼ç‹ä¸–ç•Œä¸­æ­»äº¡çš„äººæ°¸è¿œæ— æ³•è¿”å›ã€‚">And the worst part is this:<br>Anyone who dies inside the One Piece world can never return.</p>

                <p data-ar="Ø§Ù„Ø¢Ù†ØŒ Ù†Ø­Ù† Ù†Ù‚Ù ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„Ø£Ø±ÙˆØ§Ø­.<br>Ø§ÙƒØªØ´ÙØª Ø¨ÙˆÙ„Ù…Ø§ ÙˆØ±ÙŠÙƒ ÙˆØ£Ù†Ø§ Ø·Ø±ÙŠÙ‚Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø§ØªØµØ§Ù„ Ø¨ÙƒÙ….<br>ÙØªØ­Ù†Ø§ Ù‚Ù†Ø§Ø© Ø²Ù…Ù†ÙŠØ© Ø¥Ù„Ù‰ Ø¹Ø§Ù„Ù…ÙƒÙ… Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©." data-zh="ç°åœ¨ï¼Œæˆ‘ä»¬ç«™åœ¨ç²¾ç¥é¢†åŸŸã€‚<br>å¸ƒå°”ç›ã€ç‘å…‹å’Œæˆ‘å‘ç°äº†ä¸€ç§è”ç³»ä½ ä»¬çš„æ–°æ–¹æ³•ã€‚<br>æˆ‘ä»¬æ‰“å¼€äº†ä¸€ä¸ªé€šå¾€ä½ ä»¬ä¸–ç•Œçš„æ—¶ç©ºé€šé“æ¥å¯»æ±‚å¸®åŠ©ã€‚">Right now, we stand in the Spirit Realm.<br>Bulma, Rick, and I discovered a new method to contact you.<br>We opened a space-time channel to your world to ask for help.</p>

              <p data-ar="Ø®Ù„Ø§Ù„ Ø¨Ø­Ø«Ù†Ø§ØŒ ÙˆØ¬Ø¯Ù†Ø§ Ù„Ø¹Ø¨Ø© ÙÙŠ Ø¹Ø§Ù„Ù…ÙƒÙ… ØªØ³Ù…Ù‰ 'ÙˆÙ† Ø¨ÙŠØ³: ÙØ§ÙŠØªÙ†Øº Ø¨Ø§Øª 'ØŒ<br>Ù„Ø¹Ø¨Ø© ØªØ³Ù…Ø­ Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¨ÙÙ‡Ù… Ø§Ù„Ø´Ø®ØµÙŠØ§Øª ÙˆØ§Ù„ØªØ­ÙƒÙ… ÙÙŠÙ‡Ø§ Ø¨Ø¯Ù‚Ø© ÙƒØ¨ÙŠØ±Ø©." data-zh="åœ¨æˆ‘ä»¬çš„ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬åœ¨ä½ ä»¬çš„ä¸–ç•Œå‘ç°äº†ä¸€æ¬¾åä¸º'èˆªæµ·ç‹çƒ­è¡€èˆªçº¿'çš„æ¸¸æˆï¼Œ<br>è¿™æ¬¾æ¸¸æˆè®©ç©å®¶èƒ½å¤Ÿç²¾ç¡®åœ°ç†è§£å’Œæ§åˆ¶è§’è‰²ã€‚">During our research, we found a game in your world called 'One Piece: Fighting Path',<br>a game that allows players to understand and control characters with great precision.</p>

                <p data-ar="Ù„Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¨Ø¨ØŒ Ø£Ù†Ø´Ø£Ù†Ø§ Ø³ØªØ© Ø¹Ø´Ø± Ø¨Ø·ÙˆÙ„Ø©.<br>Ø³ØªØ®ØªØ§Ø± ÙƒÙ„ Ø¨Ø·ÙˆÙ„Ø© ÙØ§Ø¦Ø²Ø§Ù‹ ÙˆØ§Ø­Ø¯Ø§Ù‹.<br>Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù‡Ø¤Ù„Ø§Ø¡ Ø§Ù„ÙØ§Ø¦Ø²ÙŠÙ† ÙƒØ£Ø±ÙˆØ§Ø­ Ø¥Ù„Ù‰ Ø¹Ø§Ù„Ù… ÙˆÙ† Ø¨ÙŠØ³ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ.<br>Ø³ÙŠØ£Ø®Ø° ÙƒÙ„ ÙˆØ§Ø­Ø¯ Ù…Ù†Ù‡Ù… Ø§Ù„Ø³ÙŠØ·Ø±Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ø¹Ù„Ù‰ Ø¬Ø³Ø¯ Ø´Ø®ØµÙŠØ©." data-zh="å› æ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº†åå…­ä¸ªé”¦æ ‡èµ›ã€‚<br>æ¯ä¸ªé”¦æ ‡èµ›å°†é€‰å‡ºä¸€åè·èƒœè€…ã€‚<br>è¿™äº›è·èƒœè€…å°†ä½œä¸ºçµé­‚è¢«é€å…¥çœŸå®çš„æµ·è´¼ç‹ä¸–ç•Œã€‚<br>æ¯ä¸ªäººå°†å®Œå…¨æ§åˆ¶ä¸€ä¸ªè§’è‰²çš„èº«ä½“ã€‚">For this reason, we created sixteen tournaments.<br>Each tournament will choose one winner.<br>These winners will be sent as spirits into the real One Piece world.<br>Each one will take full control of a character's body.</p>

                <p data-ar="Ø£Ù†ØªÙ… Ø§Ù„Ø£Ù…Ù„ Ø§Ù„Ø£Ø®ÙŠØ±..." data-zh="ä½ æ˜¯æœ€åçš„å¸Œæœ›...">You are the last hope...</p>
            </div>
        </div>
    </div>
</div>

<!-- Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© C -->
<div class="group-title" data-ar="Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© C" data-zh="Cç»„">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© C</div>

<div class="level" id="C_round4">
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'C_round2', 0)"><span class="label">Ø§Ù„Ù„Ø§Ø¹Ø¨ 9</span><img src="images/botola9.webp" class="side-img"><div class="vortex-container"></div></div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'C_round2', 0)"><span class="label">Ø§Ù„Ù„Ø§Ø¹Ø¨ 10</span><img src="images/botola11.webp" class="side-img"><div class="vortex-container"></div></div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'C_round2', 1)"><span class="label">Ø§Ù„Ù„Ø§Ø¹Ø¨ 11</span><img src="images/botola10.webp" class="side-img"><div class="vortex-container"></div></div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'C_round2', 1)"><span class="label">Ø§Ù„Ù„Ø§Ø¹Ø¨ 12</span><img src="images/botola12.webp" class="side-img"><div class="vortex-container"></div></div>
</div>

<div class="level mid-round" id="C_round2">
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'C_final', 0)"><span class="label"></span><img src="" class="side-img"><div class="vortex-container"></div></div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'C_final', 0)"><span class="label"></span><img src="" class="side-img"><div class="vortex-container"></div></div>
</div>

<div class="neon-wrapper-red">

    <div class="neon-box-red"></div>

    <div class="level" id="C_final">
        <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'C_D_Winner', 0)">
            <span class="label"></span><img src="" class="side-img">
            <div class="vortex-container"></div>
        </div>
    </div>

    <div class="level" id="C_D_Winner">
        <div class="slot sparal" onclick="if(requirePassword()) secureSelect(this, 'C_D_Winner2', 0)">
            <span class="label"></span><img src="" class="side-img">
            <div class="vortex-container"></div>
        </div>
    </div>

    <div class="level" id="D_final">
        <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'C_D_Winner', 0)">
            <span class="label"></span><img src="" class="side-img">
            <div class="vortex-container"></div>
        </div>
    </div>

</div>

<div class="level mid-round" id="D_round2">
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'D_final', 0)"><span class="label"></span><img src="" class="side-img"><div class="vortex-container"></div></div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'D_final', 0)"><span class="label"></span><img src="" class="side-img"><div class="vortex-container"></div></div>
</div>

<div class="level" id="D_round4">
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'D_round2', 0)"><span class="label">Ø§Ù„Ù„Ø§Ø¹Ø¨ 13</span><img src="images/botola13.webp" class="side-img"><div class="vortex-container"></div></div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'D_round2', 0)"><span class="label">Ø§Ù„Ù„Ø§Ø¹Ø¨ 14</span><img src="images/botola15.webp" class="side-img"><div class="vortex-container"></div></div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'D_round2', 1)"><span class="label">Ø§Ù„Ù„Ø§Ø¹Ø¨ 15</span><img src="images/botola16.webp" class="side-img"><div class="vortex-container"></div></div>
    <div class="slot" onclick="if(requirePassword()) secureSelect(this, 'D_round2', 1)"><span class="label">Ø§Ù„Ù„Ø§Ø¹Ø¨ 16</span><img src="images/botola14.webp" class="side-img"><div class="vortex-container"></div></div>
</div>

<div class="group-title" data-ar="Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© D" data-zh="Dç»„">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© D</div>

<!-- Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„ -->
<div class="footer-box">
    <div class="footer-title" data-ar="Ù„ÙƒÙ„ Ù…Ù† ÙŠØ±ÙŠØ¯ Ø¥Ù†Ù‚Ø§Ø° Ù„ÙˆÙÙŠ ÙÙ„ÙŠÙ‚Ù… Ø¨Ø§Ù„Ø¥Ù†Ø¶Ù…Ø§Ù… Ù„Ù†Ø§" data-zh="æƒ³è¦æ‹¯æ•‘è·¯é£çš„äººï¼Œè¯·åŠ å…¥æˆ‘ä»¬">For those who want to save Luffy, join us</div>
    <div class="footer-links">
        <a href="https://t.me/theghostsOPFPchat" class="footer-link" target="_blank" data-ar="ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…" data-zh="Telegram">Telegram</a>
        <a href="https://youtube.com/@theghosts-ofpt?si=5hOJg9CpC6HBidZn" class="footer-link" target="_blank" data-ar="ÙŠÙˆØªÙŠÙˆØ¨" data-zh="YouTube">YouTube</a>
        <a href="https://t.me/theghostsOPF" class="footer-link" target="_blank" data-ar="ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…" data-zh="Telegram">Telegram</a>
    </div>
</div>

<script>
// ====== Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© Ø§Ù„ÙƒØ§Ù…Ù„ ======

// ====== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ======
let GITHUB_TOKEN = '';
let isAdmin = false;
const REPO_OWNER = 'familytheghosts-dot';
const REPO_NAME = 'the-ghosts--one-piece-fighting-path-team-';
let tournamentData = {};
let hasChanges = false;

// ====== Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ======
const playerImages = {
    "ÙŠØ§Ø³Ø±": "images/botola1.webp",
    "Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù„Øª": "images/botola2.webp",
    "Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù„Ù†ÙŠ": "images/botola3.webp",
    "Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø±Ø§Ø¨Ø¹": "images/botola4.webp",
    "Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø®Ø§Ù…Ø³": "images/botola5.webp",
    "Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø³Ø§Ø¯Ø³": "images/botola7.webp",
    "Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø³Ø§Ø¨Ø¹": "images/botola6.webp",
    "Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù…Ù†": "images/botola8.webp",
    "Ø§Ù„Ù„Ø§Ø¹Ø¨ 9": "images/botola9.webp",
    "Ø§Ù„Ù„Ø§Ø¹Ø¨ 10": "images/botola11.webp",
    "Ø§Ù„Ù„Ø§Ø¹Ø¨ 11": "images/botola10.webp",
    "Ø§Ù„Ù„Ø§Ø¹Ø¨ 12": "images/botola12.webp",
    "Ø§Ù„Ù„Ø§Ø¹Ø¨ 13": "images/botola13.webp",
    "Ø§Ù„Ù„Ø§Ø¹Ø¨ 14": "images/botola15.webp",
    "Ø§Ù„Ù„Ø§Ø¹Ø¨ 15": "images/botola16.webp",
    "Ø§Ù„Ù„Ø§Ø¹Ø¨ 16": "images/botola14.webp"
};

// ====== Ø²Ø± "Ø£Ù†Ø§ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„" ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„ ======
function addAdminButton() {
    const oldButton = document.getElementById('adminAccessButton');
    if (oldButton) oldButton.remove();

    if (!isAdmin) {
        const adminButton = document.createElement('div');
        adminButton.id = 'adminAccessButton';
        adminButton.innerHTML = `
            <div style="text-align: center; margin: 40px auto;">
                <button id="becomeAdminBtn" style="
                    background: linear-gradient(45deg, #ff9800, #ff5722);
                    color: white;
                    padding: 14px 35px;
                    border: none;
                    border-radius: 25px;
                    font-size: 18px;
                    font-weight: bold;
                    cursor: pointer;
                    transition: 0.3s;
                    box-shadow: 0 0 25px rgba(255, 152, 0, 0.4);
                    display: inline-flex;
                    align-items: center;
                    gap: 12px;
                " onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 0 35px rgba(255, 152, 0, 0.6)'"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 0 25px rgba(255, 152, 0, 0.4)'">
                    <span style="font-size: 22px;">ğŸ”‘</span>
                    <span>Ø£Ù†Ø§ Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©</span>
                </button>
                <div style="color: #aaa; font-size: 14px; margin-top: 10px;">
                    ÙÙ‚Ø· Ù„Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† ÙŠÙ…Ù„ÙƒÙˆÙ† ØµÙ„Ø§Ø­ÙŠØ© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ§Ø¦Ø²ÙŠÙ†
                </div>
            </div>
        `;

        const footerBox = document.querySelector('.footer-box');
        if (footerBox) {
            footerBox.parentNode.insertBefore(adminButton, footerBox.nextSibling);
        } else {
            document.body.appendChild(adminButton);
        }

        setTimeout(() => {
            const btn = document.getElementById('becomeAdminBtn');
            if (btn) btn.addEventListener('click', handleAdminAccess);
        }, 100);
    }
}

// ====== Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø·Ù„Ø¨ Ø§Ù„ÙˆØµÙˆÙ„ ÙƒÙ…Ø³Ø¤ÙˆÙ„ ======
async function handleAdminAccess() {
    const userIsAdmin = confirm('ğŸ” Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©\n\nÙ‡Ù„ Ø£Ù†Øª Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©ØŸ\n\n' +
                               'â€¢ Ù†Ø¹Ù…: Ø³Ø£Ø·Ù„Ø¨ Ù…Ù†Ùƒ Ø§Ù„ØªÙˆÙƒÙ† Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ§Ø¦Ø²ÙŠÙ†\n' +
                               'â€¢ Ù„Ø§: ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙÙ‚Ø·');

    if (!userIsAdmin) {
        alert('ğŸ‘‹ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ! ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø´Ø§Ù‡Ø¯Ø© Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©.');
        return;
    }

    const userToken = prompt(`ğŸ® Ø£Ø¯Ø®Ù„ GitHub Token:\n\nØ§Ù„ØªÙˆÙƒÙ† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ ghp_\nØ§Ù†Ø³Ø® Ø§Ù„ØªÙˆÙƒÙ† Ù…Ù† GitHub ÙˆØ§Ù„ØµÙ‚Ù‡ Ù‡Ù†Ø§:`);

    if (userToken && (userToken.trim().startsWith('ghp_') || userToken.trim().startsWith('github_pat_'))) {
        GITHUB_TOKEN = userToken.trim();
        isAdmin = true;
        updateAdminStatus(true);
        addControlButtons();
        removeAdminButton();

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ÙÙˆØ±Ø§Ù‹
        tournamentData = await loadTournamentData();
        if (Object.keys(tournamentData).length > 0) {
            applyTournamentData(tournamentData);
            alert('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù…Ù† GitHub');
        } else {
            alert('âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ§Ø¦Ø²ÙŠÙ†.');
        }

    } else if (userToken) {
        alert('âŒ Ø§Ù„ØªÙˆÙƒÙ† ØºÙŠØ± ØµØ§Ù„Ø­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ ghp_ Ø£Ùˆ github_pat_');
    } else {
        alert('âš ï¸ ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡. Ø³ØªØ´Ø§Ù‡Ø¯ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© ÙÙ‚Ø·.');
    }
}

// ====== Ø¥Ø²Ø§Ù„Ø© Ø²Ø± Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­ÙˆÙ„ Ø¥Ù„Ù‰ Ù…Ø³Ø¤ÙˆÙ„ ======
function removeAdminButton() {
    const adminButton = document.getElementById('adminAccessButton');
    if (adminButton) adminButton.remove();
}

// ====== ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ ======
function updateAdminStatus(admin) {
    let statusElement = document.getElementById('adminStatus');
    if (statusElement) statusElement.remove();

    statusElement = document.createElement('div');
    statusElement.id = 'adminStatus';

    const footerBox = document.querySelector('.footer-box');
    const adminButton = document.getElementById('adminAccessButton');

    if (footerBox) {
        if (adminButton) {
            adminButton.parentNode.insertBefore(statusElement, adminButton.nextSibling);
        } else {
            footerBox.parentNode.insertBefore(statusElement, footerBox.nextSibling);
        }
    } else {
        document.body.appendChild(statusElement);
    }

    if (admin) {
        statusElement.innerHTML = `
            <div style="text-align: center; margin: 40px auto 60px;">
                <div style="
                    display: inline-block;
                    padding: 18px 35px;
                    background: linear-gradient(135deg, rgba(0, 100, 0, 0.2), rgba(0, 50, 0, 0.3));
                    border: 2px solid #00ff00;
                    color: #00ff00;
                    border-radius: 12px;
                    font-weight: bold;
                    font-size: 17px;
                    text-align: center;
                    box-shadow: 0 0 30px rgba(0, 255, 0, 0.25),
                                inset 0 0 20px rgba(0, 255, 0, 0.1);
                    max-width: 500px;
                    width: 90%;
                ">
                    <div style="font-size: 24px; margin-bottom: 8px;">ğŸ‘‘</div>
                    <div style="font-weight: bold; font-size: 20px; margin-bottom: 5px;">ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</div>
                    <div style="font-size: 15px; margin-top: 8px; color: #aaffaa;">
                        ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ§Ø¦Ø²ÙŠÙ† ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø¬Ù…ÙŠØ¹
                    </div>
                    <div style="font-size: 12px; margin-top: 10px; color: #88ff88; opacity: 0.8;">
                        âš¡ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØªØ­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù„Ù‰ GitHub
                    </div>
                </div>
            </div>
        `;
    } else {
        statusElement.innerHTML = `
            <div style="text-align: center; margin: 40px auto 60px;">
                <div style="
                    display: inline-block;
                    padding: 18px 35px;
                    background: linear-gradient(135deg, rgba(100, 0, 0, 0.2), rgba(50, 0, 0, 0.3));
                    border: 2px solid #ff5555;
                    color: #ffaaaa;
                    border-radius: 12px;
                    font-weight: bold;
                    font-size: 17px;
                    text-align: center;
                    box-shadow: 0 0 30px rgba(255, 50, 50, 0.25),
                                inset 0 0 20px rgba(255, 50, 50, 0.1);
                    max-width: 500px;
                    width: 90%;
                ">
                    <div style="font-size: 24px; margin-bottom: 8px;">ğŸ‘ï¸</div>
                    <div style="font-weight: bold; font-size: 20px; margin-bottom: 5px;">ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯</div>
                    <div style="font-size: 15px; margin-top: 8px; color: #ffaaaa;">
                        Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙÙ‚Ø·
                    </div>
                    <div style="font-size: 12px; margin-top: 10px; color: #ff8888; opacity: 0.8;">
                        ğŸ”’ Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ§Ø¦Ø²ÙŠÙ† Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "Ø£Ù†Ø§ Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©"
                    </div>
                </div>
            </div>
        `;
    }
}

// ====== Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ ======
function requirePassword() {
    if (isAdmin) return true;

    const becomeAdmin = confirm('âŒ ØªØ­ØªØ§Ø¬ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ§Ø¦Ø²ÙŠÙ†\n\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„ØªØ­ÙˆÙ„ Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ØŸ');
    if (becomeAdmin) handleAdminAccess();
    return false;
}

// ====== Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù„Ù‰ GitHub (Ù…ØµØ­Ø­) ======
async function saveTournamentData() {
    if (!GITHUB_TOKEN || !isAdmin) {
        alert('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø­ÙØ¸ - Ù„ÙŠØ³ Ù…Ø³Ø¤ÙˆÙ„Ø§Ù‹');
        return false;
    }

    // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„
    const saveBtn = document.querySelector('[onclick="saveTournamentData()"]');
    const originalText = saveBtn ? saveBtn.innerHTML : '';
    if (saveBtn) saveBtn.innerHTML = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';

    try {
        // Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
        const data = {};
        
        // ÙÙ‚Ø· Ø§Ù„Ø¬ÙˆÙ„Ø§Øª Ø§Ù„ØªÙŠ ÙŠØ¬Ø¨ Ø£Ù† ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ÙØ§Ø¦Ø²ÙŠÙ† (Ø§Ù„Ø¬ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© ÙÙ‚Ø·)
        const validRounds = [
            'A_round2', 'B_round2', 'C_round2', 'D_round2',
            'A_final', 'B_final', 'C_final', 'D_final',
            'A_B_Winner', 'C_D_Winner',
            'A_B_Winner2', 'C_D_Winner2',
            'Champion'
        ];

        validRounds.forEach(roundId => {
            const roundElement = document.getElementById(roundId);
            if (roundElement) {
                const slot = roundElement.querySelector('.slot');
                if (slot) {
                    const label = slot.querySelector('.label')?.textContent?.trim();
                    if (label && label !== '') {
                        data[roundId] = {
                            winner: label,
                            image: playerImages[label] || "",
                            timestamp: new Date().toISOString()
                        };
                    }
                }
            }
        });

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª
        if (Object.keys(data).length === 0) {
            alert('âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø­ÙØ¸Ù‡Ø§');
            if (saveBtn) saveBtn.innerHTML = originalText;
            return false;
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù€ issue Ø§Ù„Ø­Ø§Ù„ÙŠ
        const issuesResponse = await fetch(
            `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/issues?labels=tournament-data&state=open`,
            {
                headers: {
                    'Authorization': `token ${GITHUB_TOKEN}`,
                    'Accept': 'application/vnd.github.v3+json'
                }
            }
        );

        let issueNumber = null;
        if (issuesResponse.ok) {
            const issues = await issuesResponse.json();
            if (issues.length > 0) {
                issueNumber = issues[0].number;
            }
        }

        const requestBody = {
            title: `ğŸ¯ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© - ${new Date().toLocaleDateString('ar-EG')}`,
            body: `### Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©\n\nØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«: ${new Date().toLocaleString('ar-EG')}\n\n\`\`\`json\n${JSON.stringify(data, null, 2)}\n\`\`\``,
            labels: ['tournament-data']
        };

        let response;
        if (issueNumber) {
            // ØªØ­Ø¯ÙŠØ« issue Ù…ÙˆØ¬ÙˆØ¯
            response = await fetch(
                `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/issues/${issueNumber}`,
                {
                    method: 'PATCH',
                    headers: {
                        'Authorization': `token ${GITHUB_TOKEN}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestBody)
                }
            );
        } else {
            // Ø¥Ù†Ø´Ø§Ø¡ issue Ø¬Ø¯ÙŠØ¯
            response = await fetch(
                `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/issues`,
                {
                    method: 'POST',
                    headers: {
                        'Authorization': `token ${GITHUB_TOKEN}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestBody)
                }
            );
        }

        if (response.ok) {
            const result = await response.json();
            const issueUrl = result.html_url;

            alert(`âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø¬Ù…ÙŠØ¹!\n\nÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø´Ø§Ù‡Ø¯ØªÙ‡Ø§ Ø¹Ù„Ù‰:\n${issueUrl}`);

            hasChanges = false;
            if (saveBtn) saveBtn.innerHTML = 'âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸!';

            setTimeout(() => {
                if (saveBtn) saveBtn.innerHTML = originalText;
            }, 3000);

            return true;
        } else {
            const errorText = await response.text();
            console.error('âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø­ÙØ¸:', response.status, errorText);

            if (response.status === 401) {
                alert('âŒ Ø§Ù„ØªÙˆÙƒÙ† ØºÙŠØ± ØµØ§Ù„Ø­ Ø£Ùˆ Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©');
                isAdmin = false;
                updateAdminStatus(false);
                addAdminButton();
            }

            if (saveBtn) saveBtn.innerHTML = 'âŒ ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸';
            setTimeout(() => {
                if (saveBtn) saveBtn.innerHTML = originalText;
            }, 3000);

            return false;
        }
    } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„:', error);
        alert('âŒ ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ GitHub. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª');
        if (saveBtn) saveBtn.innerHTML = 'âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„';
        setTimeout(() => {
            if (saveBtn) saveBtn.innerHTML = originalText;
        }, 3000);
        return false;
    }
}

// ====== Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† GitHub ======
async function loadTournamentData() {
    try {
        console.log('ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† GitHub...');

        const response = await fetch(
            `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/issues?labels=tournament-data&state=open&sort=updated&direction=desc`
        );

        if (response.ok) {
            const issues = await response.json();
            if (issues.length > 0) {
                const latest = issues[0];
                const body = latest.body;

                const jsonMatch = body.match(/```json\n([\s\S]*?)\n```/) ||
                                 body.match(/```\n([\s\S]*?)\n```/) ||
                                 body.match(/{[\s\S]*}/);

                if (jsonMatch) {
                    const jsonString = jsonMatch[1] || jsonMatch[0];
                    try {
                        const data = JSON.parse(jsonString);
                        console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† GitHub');
                        return data;
                    } catch (e) {
                        console.log('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ JSON:', e);
                    }
                }
            }
        }
        console.log('âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø³Ø§Ø¨Ù‚Ø©');
    } catch (error) {
        console.log('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
    }
    return {};
}

// ====== ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (Ù…ØµØ­Ø­ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹) ======
function applyTournamentData(data) {
    if (!data || Object.keys(data).length === 0) {
        console.log('âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„ØªØ·Ø¨ÙŠÙ‚Ù‡Ø§');
        return;
    }

    let appliedCount = 0;

    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙ‚Ø· Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© (ÙˆÙ„ÙŠØ³ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰)
    Object.keys(data).forEach(roundId => {
        const slotData = data[roundId];
        if (!slotData || !slotData.winner) return;

        const roundElement = document.getElementById(roundId);
        if (!roundElement) return;

        const slot = roundElement.querySelector('.slot');
        if (!slot) return;

        const label = slot.querySelector('.label');
        const image = slot.querySelector('.side-img');

        if (label && slotData.winner) {
            label.textContent = slotData.winner;
            appliedCount++;
        }

        if (image && slotData.image) {
            image.src = slotData.image;
            image.style.display = 'block';
            image.style.transform = 'translateY(-50%)';
        }

        slot.classList.add('active');
    });

    console.log(`âœ… ØªÙ… ØªØ·Ø¨ÙŠÙ‚ ${appliedCount} Ù†ØªÙŠØ¬Ø© Ù…Ù† GitHub`);
}

// ====== Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ ======
async function resetTournament() {
    if (!isAdmin || !GITHUB_TOKEN) {
        alert('âŒ ØªØ­ØªØ§Ø¬ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†');
        return;
    }

    const confirmReset = confirm(`âš ï¸ ØªØ­Ø°ÙŠØ± Ø´Ø¯ÙŠØ¯!\n\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ØŸ\n\nØ³ÙŠØªÙ…:\nâ€¢ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø¹Ù„Ù‰ GitHub\nâ€¢ Ø¥ØºÙ„Ø§Ù‚ issue Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚\nâ€¢ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù…Ø­Ù„ÙŠØ§Ù‹\n\nÙ‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!`);

    if (!confirmReset) return;

    try {
        const resetBtn = document.querySelector('[onclick="resetTournament()"]');
        const originalText = resetBtn ? resetBtn.innerHTML : '';
        if (resetBtn) resetBtn.innerHTML = 'â³ Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†...';

        // Ø¥ØºÙ„Ø§Ù‚ issues Ø¹Ù„Ù‰ GitHub
        const issuesResponse = await fetch(
            `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/issues?labels=tournament-data`,
            {
                headers: {
                    'Authorization': `token ${GITHUB_TOKEN}`,
                    'Accept': 'application/vnd.github.v3+json'
                }
            }
        );

        if (issuesResponse.ok) {
            const issues = await issuesResponse.json();
            for (const issue of issues) {
                if (issue.state === 'open') {
                    await fetch(
                        `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/issues/${issue.number}`,
                        {
                            method: 'PATCH',
                            headers: {
                                'Authorization': `token ${GITHUB_TOKEN}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                state: 'closed',
                                title: `ğŸ”´ [Ù…ØºÙ„Ù‚] ${issue.title}`
                            })
                        }
                    );
                }
            }
        }

        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        resetLocalTournament();

        // Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
        localStorage.removeItem('tournamentData');
        tournamentData = {};
        hasChanges = false;

        if (resetBtn) resetBtn.innerHTML = 'âœ… ØªÙ… Ø§Ù„ØªØ¹ÙŠÙŠÙ†!';

        alert(`ğŸ‰ ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„!\n\nÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø¨Ø¯Ø¡ Ø¨Ø·ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©`);

        setTimeout(() => {
            if (resetBtn) resetBtn.innerHTML = originalText;
        }, 3000);

    } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†:', error);
        alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†');

        const resetBtn = document.querySelector('[onclick="resetTournament()"]');
        if (resetBtn) resetBtn.innerHTML = 'âŒ ÙØ´Ù„ Ø§Ù„ØªØ¹ÙŠÙŠÙ†';
        setTimeout(() => {
            if (resetBtn) resetBtn.innerHTML = 'ğŸ”„ ØªØ­Ø¯ÙŠØ« ÙˆØ¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†';
        }, 3000);
    }
}

// ====== Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù…Ø­Ù„ÙŠØ§Ù‹ (Ù…ØµØ­Ø­) ======
function resetLocalTournament() {
    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬ÙˆÙ„Ø§Øª Ø§Ù„ØªÙŠ ÙŠØ¬Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†Ù‡Ø§ ÙÙ‚Ø· (Ø§Ù„Ø¬ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©)
    const roundsToReset = [
        'A_round2', 'B_round2', 'C_round2', 'D_round2',
        'A_final', 'B_final', 'C_final', 'D_final',
        'A_B_Winner', 'C_D_Winner',
        'A_B_Winner2', 'C_D_Winner2',
        'Champion'
    ];

    roundsToReset.forEach(roundId => {
        const round = document.getElementById(roundId);
        if (round) {
            const slots = round.querySelectorAll('.slot');
            slots.forEach(slot => {
                slot.classList.remove('active');
                
                const label = slot.querySelector('.label');
                if (label) label.textContent = '';
                
                const img = slot.querySelector('.side-img');
                if (img) {
                    img.src = '';
                    img.style.display = 'none';
                }
            });
        }
    });

    console.log('âœ… ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù…Ø­Ù„ÙŠØ§Ù‹');
}

// ====== Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ§Ø¦Ø² (Ù…ØµØ­Ø­ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹) ======
async function secureSelect(clickedSlot, nextRoundId, position) {
    if (!requirePassword()) return;

    const label = clickedSlot.querySelector(".label").textContent.trim();
    if (!label || label === '') {
        alert('âš ï¸ Ø§Ø®ØªØ± Ù„Ø§Ø¹Ø¨Ø§Ù‹ Ø£ÙˆÙ„Ø§Ù‹');
        return;
    }

    const imgSrc = playerImages[label] || "";

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
    const nextRound = document.getElementById(nextRoundId);
    if (!nextRound) return;

    const targets = nextRound.querySelectorAll(".slot");
    const targetSlot = targets[position] || targets[0];
    if (!targetSlot) return;

    // Ø¥Ø²Ø§Ù„Ø© active Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø³Ù„ÙˆØ·Ø§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø£ÙˆÙ„Ø§Ù‹
    targets.forEach(s => s.classList.remove('active'));

    const labelBox = targetSlot.querySelector(".label");
    const imgBox = targetSlot.querySelector(".side-img");

    if (labelBox) labelBox.textContent = label;
    if (imgBox) {
        imgBox.src = imgSrc;
        imgBox.style.transform = "translateY(-50%)";
        imgBox.style.display = "block";
    }

    // âœ… Ù„Ø§ ØªØ¶ÙŠÙ active Ù„Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (Ù…Ø­Ø¬ÙˆØ²Ø© Ø¯Ø§Ø¦Ù…Ø§Ù‹)
    // clickedSlot.classList.add("active");
    
    targetSlot.classList.add("active");
    hasChanges = true;

    // âœ… Ù„Ø§ ØªÙ†Ø³Ø® Ù„Ù„Ø¬ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© Ø¥Ù„Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©
    if (nextRoundId === "A_B_Winner" || nextRoundId === "C_D_Winner") {
        const copyRoundId = nextRoundId === "A_B_Winner" ? "A_B_Winner2" : "C_D_Winner2";
        const copySlot = document.querySelector(`#${copyRoundId} .slot`);
        
        if (copySlot) {
            const copyLabel = copySlot.querySelector(".label");
            const copyImg = copySlot.querySelector(".side-img");
            
            if (copyLabel) copyLabel.textContent = label;
            if (copyImg) {
                copyImg.src = imgSrc;
                copyImg.style.transform = "translateY(-50%)";
                copyImg.style.display = "block";
            }
            
            copySlot.classList.add("active");
        }
    }

    // Ø­ÙØ¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¹Ù„Ù‰ GitHub (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
    if (isAdmin && GITHUB_TOKEN) {
        const autoSave = confirm(`ğŸ® ØªÙ… ØªØ­Ø¯ÙŠØ¯ ${label} ÙØ§Ø¦Ø²Ø§Ù‹\n\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù„Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¢Ù†ØŸ`);
        if (autoSave) {
            await saveTournamentData();
        } else {
            alert('ğŸ’¾ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù…Ø­ÙÙˆØ¸Ø© Ù…Ø­Ù„ÙŠØ§Ù‹ ÙÙ‚Ø·\nØªØ°ÙƒØ± Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø­ÙØ¸ Ù„Ù„Ø¬Ù…ÙŠØ¹" Ù„ÙŠØ±Ø§Ù‡Ø§ Ø§Ù„Ø¬Ù…ÙŠØ¹');
        }
    }
}

// ====== ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¨Ø·Ù„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ======
async function championSelected(slot) {
    if (!requirePassword()) return;

    const label = slot.querySelector(".label").textContent.trim();
    if (!label || label === '') {
        alert("âš ï¸ Ø§Ø®ØªØ± Ø§Ù„ÙØ§Ø¦Ø² Ø£ÙˆÙ„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø¬ÙˆÙ„Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©");
        return;
    }

    // Ø¥Ø²Ø§Ù„Ø© active Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø³Ù„ÙˆØ·Ø§Øª ÙÙŠ Champion
    document.querySelectorAll('#Champion .slot').forEach(s => s.classList.remove('active'));
    
    slot.classList.add("active");
    hasChanges = true;

    const finalConfirm = confirm(`ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! ${label} Ù‡Ùˆ Ø§Ù„Ø¨Ø·Ù„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ!\n\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù„Ù„Ø¬Ù…ÙŠØ¹ØŸ`);

    if (finalConfirm && isAdmin && GITHUB_TOKEN) {
        await saveTournamentData();
    }
}

// ====== Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ±Ø¬Ù…Ø© ======
let currentLanguage = 'ar';

function switchLanguage(lang) {
    currentLanguage = lang;
    updatePageLanguage();

    if (lang === 'ar') {
        document.dir = 'rtl';
        document.lang = 'ar';
    } else {
        document.dir = 'ltr';
        document.lang = 'zh';
    }
}

function updatePageLanguage() {
    const elements = document.querySelectorAll('[data-ar][data-zh]');
    elements.forEach(element => {
        if (currentLanguage === 'ar') {
            element.textContent = element.getAttribute('data-ar');
        } else {
            element.textContent = element.getAttribute('data-zh');
        }
    });
}

// ====== Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© ======
const canvas = document.getElementById("starfield");
const ctx = canvas.getContext("2d");
let w, h;

function resize() {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

const starCount = 200;
const stars = [];

for (let i = 0; i < starCount; i++) {
    stars.push({
        x: Math.random() * w,
        y: Math.random() * h,
        size: Math.random() * 1.5 + 0.5,
        speed: Math.random() * 0.3 + 0.1,
        color: randomNeonColor(),
        driftX: (Math.random() - 0.5) * 0.2,
        driftY: (Math.random() - 0.5) * 0.2,
        flicker: Math.random() * 0.3
    });
}

function randomNeonColor() {
    const neon = [
        "rgba(0,255,255,",
        "rgba(0,150,255,",
        "rgba(255,0,255,"
    ];
    return neon[Math.floor(Math.random() * neon.length)];
}

function animate() {
    ctx.clearRect(0, 0, w, h);

    for (let s of stars) {
        let flickerAlpha = 0.5 + Math.sin(Date.now() * 0.002 + s.flicker) * 0.5;
        ctx.fillStyle = s.color + flickerAlpha + ")";

        ctx.beginPath();
        ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
        ctx.fill();

        s.x += s.driftX;
        s.y += s.driftY;

        if (s.x < 0) s.x = w;
        if (s.x > w) s.x = 0;
        if (s.y < 0) s.y = h;
        if (s.y > h) s.y = 0;
    }
    requestAnimationFrame(animate);
}

// ====== Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚ØµØ© ======
function openStory() {
    document.getElementById("storyModal").style.display = "block";
}

function closeStory() {
    document.getElementById("storyModal").style.display = "none";
}

// ====== Ø¥Ø¶Ø§ÙØ© Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… ======
function addControlButtons() {
    if (!isAdmin) return;

    const oldControls = document.getElementById('adminControls');
    if (oldControls) oldControls.remove();

    const controlsHTML = `
        <div id="adminControls" style="
            text-align: center;
            margin: 40px auto 20px;
        ">
            <div style="
                display: inline-flex;
                gap: 15px;
                padding: 20px;
                background: linear-gradient(135deg, rgba(0, 20, 40, 0.9), rgba(0, 40, 80, 0.9));
                border-radius: 20px;
                border: 2px solid rgba(0, 200, 255, 0.5);
                box-shadow: 0 0 35px rgba(0, 200, 255, 0.3),
                            inset 0 0 20px rgba(0, 200, 255, 0.1);
                flex-wrap: wrap;
                justify-content: center;
            ">
                <button onclick="saveTournamentData()" style="
                    background: linear-gradient(45deg, #00c853, #64dd17);
                    color: white;
                    padding: 14px 28px;
                    border: none;
                    border-radius: 20px;
                    font-size: 16px;
                    font-weight: bold;
                    cursor: pointer;
                    transition: 0.3s;
                    min-width: 170px;
                    box-shadow: 0 4px 15px rgba(0, 200, 80, 0.4);
                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(0, 200, 80, 0.6)'"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0, 200, 80, 0.4)'">
                    ğŸ’¾ Ø­ÙØ¸ Ù„Ù„Ø¬Ù…ÙŠØ¹
                </button>

                <button onclick="resetTournament()" style="
                    background: linear-gradient(45deg, #ff9800, #ff5722);
                    color: white;
                    padding: 14px 28px;
                    border: none;
                    border-radius: 20px;
                    font-size: 16px;
                    font-weight: bold;
                    cursor: pointer;
                    transition: 0.3s;
                    min-width: 170px;
                    box-shadow: 0 4px 15px rgba(255, 152, 0, 0.4);
                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(255, 152, 0, 0.6)'"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(255, 152, 0, 0.4)'">
                    ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
                </button>

                <button onclick="location.reload()" style="
                    background: linear-gradient(45deg, #2196F3, #03A9F4);
                    color: white;
                    padding: 14px 28px;
                    border: none;
                    border-radius: 20px;
                    font-size: 16px;
                    font-weight: bold;
                    cursor: pointer;
                    transition: 0.3s;
                    min-width: 170px;
                    box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(33, 150, 243, 0.6)'"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(33, 150, 243, 0.4)'">
                    ğŸ”ƒ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©
                </button>
            </div>
        </div>
    `;

    const adminStatus = document.getElementById('adminStatus');
    const adminButton = document.getElementById('adminAccessButton');

    if (adminStatus) {
        adminStatus.insertAdjacentHTML('beforebegin', controlsHTML);
    } else if (adminButton) {
        adminButton.insertAdjacentHTML('afterend', controlsHTML);
    } else {
        const footerBox = document.querySelector('.footer-box');
        if (footerBox) {
            footerBox.insertAdjacentHTML('afterend', controlsHTML);
        } else {
            document.body.insertAdjacentHTML('beforeend', controlsHTML);
        }
    }
}

// ====== Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ GitHub ======
async function testGitHubConnection() {
    try {
        const response = await fetch(
            `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}`,
            {
                headers: GITHUB_TOKEN ? {
                    'Authorization': `token ${GITHUB_TOKEN}`,
                    'Accept': 'application/vnd.github.v3+json'
                } : {}
            }
        );
        
        if (response.ok) {
            console.log('âœ… Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ù…ÙˆØ¬ÙˆØ¯!');
            return true;
        } else {
            console.error('âŒ Ø®Ø·Ø£:', response.status);
            return false;
        }
    } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„:', error);
        return false;
    }
}

// ====== Ø¨Ø¯Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù… ======
async function initializeTournament() {
    console.log('ğŸš€ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©...');

    // 1. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù…
    await setupTokenSystem();

    // 2. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© (Ù„Ù„Ù…Ø´Ø§Ù‡Ø¯ÙŠÙ† ÙˆØ§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†)
    tournamentData = await loadTournamentData();
    if (Object.keys(tournamentData).length > 0) {
        applyTournamentData(tournamentData);
        console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©');
    }

    // 3. ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¬ÙˆÙ…
    animate();

    // 4. ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ±Ø¬Ù…Ø©
    updatePageLanguage();

    // 5. Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ GitHub
    setTimeout(testGitHubConnection, 1000);
}

// ====== Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø°ÙƒÙŠ ======
async function setupTokenSystem() {
    try {
        const response = await fetch('token.html');
        if (response.ok) {
            const text = await response.text();
            const tokenMatch = text.match(/GITHUB_TOKEN:\s*['"]([^'"]+)['"]/);

            if (tokenMatch && tokenMatch[1]) {
                GITHUB_TOKEN = tokenMatch[1];
                isAdmin = true;
                console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ† Ù…Ù† token.html');
                updateAdminStatus(true);
                addControlButtons();
                return true;
            }
        }
    } catch (error) {
        console.log('â„¹ï¸ token.html ØºÙŠØ± Ù…ØªÙˆÙØ±');
    }

    updateAdminStatus(false);
    addAdminButton();
    return false;
}

// ====== ØªØ´ØºÙŠÙ„ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ======
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(() => {
        initializeTournament();
    }, 500);

    // ØªØ¹Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ø³Ù„ÙˆØ·Ø§Øª
    const slots = document.querySelectorAll('.slot');
    slots.forEach(function(s) {
        let w = s.getAttribute('data-w');
        let h = s.getAttribute('data-h');

        function normalizeSize(val, fallback) {
            if (!val || val.trim() === '') return fallback + 'px';
            val = val.trim();
            if (val.endsWith('%') || val.endsWith('vw') || val.endsWith('vh') || val.endsWith('px')) return val;
            if (/^[0-9]+$/.test(val)) return val + 'px';
            return val;
        }

        const finalW = normalizeSize(w, 150);
        const finalH = normalizeSize(h, 240);

        s.style.width = finalW;
        s.style.height = finalH;

        try {
            if (finalH.endsWith('px')) {
                const num = parseInt(finalH.replace('px',''), 10);
                const fontSize = Math.max(12, Math.min(24, Math.round(num / 10)));
                s.style.fontSize = fontSize + 'px';
            }
        } catch(e) {}

        const label = s.querySelector('.label');
        if (label) s.setAttribute('aria-label', label.innerText || 'slot');
    });
});

// ====== ØªÙ†Ø¨ÙŠÙ‡ Ø¹Ù†Ø¯ Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„ØµÙØ­Ø© ======
window.addEventListener('beforeunload', function(e) {
    if (hasChanges && isAdmin) {
        e.preventDefault();
        e.returnValue = 'Ù„Ø¯ÙŠÙƒ ØªØºÙŠÙŠØ±Ø§Øª ØºÙŠØ± Ù…Ø­ÙÙˆØ¸Ø©! Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø©ØŸ';
        return e.returnValue;
    }
});
</script>

</body>
</html>




